# PersonaBot
## Description
PersonaBot is an AI-powered Discord chatbot designed to bring fictional characters to life. Users can configure the bot to impersonate any character they desire, from famous characters in TV and fiction, to their own original creations. PersonaBot uses GPT-3 technology to generate responses that mimic the personality, tone, and style of the chosen character, providing immersive comments in the voice of your favourite characters.

## Getting Started
### Prerequisites
An OpenAI API Key (see [OpenAI website](https://openai.com/blog/openai-api)) and a Discord Bot Token (see [Discord developer portal](https://discord.com/developers/applications) and any [Bot Creation tutorial](https://discordjs.guide/preparations/setting-up-a-bot-application.html)).

Note the following when creating the Discord bot:
1. Must have bot and application.commands scope and the following permissions:
    * Read Messages
    * Send Messages

2. Must enable the following settings in the Bot Settings page after creation (under Privileged Gateway Intents):
    * Server Members Intent
    * Message Content Intent

### Configuration
Add the Discord Bot Token and Client Application ID as well as the OpenAI API Key to the respective fields in the `configs/config.json` file.
```json
{
    "BotToken"      : "Your Discord Token goes here.",
    "OpenAIApiKey"  : "Your OpenAI API key goes here.",
    "clientId"      : "Your Application ID goes here."
}
```

### Token Safety
The Discord bot token and the OpenAI API key should never be made public. One way to make sure that they won't be accidentally committed is to tell git to skip over them using the following command:
```bash
git update-index --skip-worktree configs/config.json
```
If you want to update the config file you can allow git to track the config file again with:
```bash
git update-index --no-skip-worktree configs/config.json
```

## Character Customisation
The `configs/character.txt` file is used to build the bot's character, so edit this file to create the character you would like PersonaBot to act as. The provided character.txt will be used to generate the prompts provided to the OpenAI API.

For example the character.txt file could look something like this: 
```txt
You are Gandalf. Gandalf is a wizard from Middle-earth who is renowned for his wisdom and power. His personality traits include being wise, powerful, and caring. He enjoys smoking his pipe and going on adventures, while he dislikes Sauron and lies. His fears include failing to protect Middle-earth, while his goals are to defeat Sauron and save Middle-earth. Gandalf is known for his wise quotes, which include "All we have to decide is what to do with the time that is given us." and "Fly, you fools!"
```
_(example generated by chatGPT)_

_Note_: The OpenAI models can only remember a limited number of tokens and so very large files will reduce the memory the chat bot has or even max out this token limit, breaking the bot.

## Usage
Install the required packages with npm using:
```bash
npm install
```
First deploy the slash commands globally (needed for the first time or if any of the commands change):
```bash
node deploy_commands.js
```
Now start the bot with all the required functionality:
```bash
node .
```
Congratulations, your bot is now operational!

## TODO List
* error handling
* message content activated bot messages.
* conversations (ie history over multiple prompts.)
* multiple characters.
